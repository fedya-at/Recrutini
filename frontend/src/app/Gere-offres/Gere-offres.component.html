<!-- offer-list.component.html -->
<div class="container mt-5">
  <h1>  List of Offers
</h1>
  <table class="table table-bordered table-hover">
    <thead>
      <tr>
        <th scope="col">Title</th>
        <th scope="col">Company</th>
        <th scope="col">Company Description</th>
        <th scope="col">Employees</th>
        <th scope="col">Skills</th>
        <th scope="col">Location</th>
        <th scope="col">Date Fin</th>
        <th scope="col" [style.width.%]="15">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let offer of offers">
        <td>{{ offer.title }}</td>
        <td>{{ offer.company }}</td>
        <td>{{ offer.companyDescription }}</td>
        <td>{{ offer.employeesNeeded }}</td>
        <td>{{ offer.skills }}</td>
        <td>{{ offer.location }}</td>
        <td>{{ offer.dateFin | date : "short" }}</td>
        <td [style.width.%]="15">
          <button
            class="btn btn-primary btn-sm"
            (click)="editOffer(offer)"
            data-bs-toggle="modal"
            data-bs-target="#editModal"
            [style.margin-right.%]="5"
          >
            Edit
          </button>
          <button class="btn btn-danger btn-sm" (click)="onDelete(offer._id)">
            Delete
          </button>
        </td>
      </tr>
    </tbody>
  </table>
  <button type="button" class="btn btn-outline-success" data-bs-toggle="modal" data-bs-target="#addOffre" > Add Job Offer</button>

</div>
<div class="modal fade" id="addOffre" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
<form (ngSubmit)="onCreateSubmit()" class="mt-4">
          <div class="mb-3">
            <label for="title" class="form-label">Title:</label>
            <input
              type="text"
              id="title"
              name="title"
              class="form-control"
              [(ngModel)]="newOffer.title"
              required
            />
          </div>

          <div class="mb-3">
            <label for="company" class="form-label">Company:</label>
            <input
              type="text"
              id="company"
              name="company"
              class="form-control"
              [(ngModel)]="newOffer.company"
              required
            />
          </div>

          <div class="mb-3">
            <label for="companyDescription" class="form-label"
              >Company Description:</label
            >
            <textarea
              id="companyDescription"
              name="companyDescription"
              class="form-control"
              [(ngModel)]="newOffer.companyDescription"
              required
            ></textarea>
          </div>

          <div class="mb-3">
            <label for="employeesNeeded" class="form-label"
              >Employees Needed:</label
            >
            <input
              type="number"
              id="employeesNeeded"
              name="employeesNeeded"
              class="form-control"
              [(ngModel)]="newOffer.employeesNeeded"
              required
            />
          </div>

          <div class="mb-3">
            <label for="location" class="form-label">Location:</label>
            <input
              type="text"
              id="location"
              name="location"
              class="form-control"
              [(ngModel)]="newOffer.location"
              required
            />
          </div>

          <div class="mb-3">
            <label for="description" class="form-label">Description:</label>
            <textarea
              id="description"
              name="description"
              class="form-control"
              [(ngModel)]="newOffer.description"
              required
            ></textarea>
          </div>

          <div class="mb-3">
            <label for="skills" class="form-label">Skills:</label>
            <input
              type="text"
              id="skills"
              name="skills"
              class="form-control"
              [(ngModel)]="newOffer.skills"
              required
            />
          </div>

          <div class="mb-3">
            <label for="salary" class="form-label">Salary:</label>
            <input
              type="number"
              id="salary"
              name="salary"
              class="form-control"
              [(ngModel)]="newOffer.salary"
              required
            />
          </div>

          <div class="mb-3">
            <label for="dateFin" class="form-label">Closing Date:</label>
            <input
              type="date"
              id="dateFin"
              name="dateFin"
              class="form-control"
              [(ngModel)]="newOffer.dateFin"
              required
            />
          </div>
 <input
    type="hidden"
    id="Postedby"
    name="Postedby"
    [(ngModel)]="newOffer.Postedby"
  />
          <div class="modal-footer">
            <div>
              <button class="btn btn-success" type="submit">
                Add Offer
              </button>
            </div>
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Close
            </button>
          </div>
        </form>      </div>
   
    </div>
  </div>
</div>
<div
  class="modal fade"
  id="editModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-scrollable modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Edit Offer</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <form (ngSubmit)="onEditSubmit()" class="mt-4">
          <div class="mb-3">
            <label for="title" class="form-label">Title:</label>
            <input
              type="text"
              id="title"
              name="title"
              class="form-control"
              [(ngModel)]="editedOffer.title"
              required
            />
          </div>

          <div class="mb-3">
            <label for="company" class="form-label">Company:</label>
            <input
              type="text"
              id="company"
              name="company"
              class="form-control"
              [(ngModel)]="editedOffer.company"
              required
            />
          </div>

          <div class="mb-3">
            <label for="companyDescription" class="form-label"
              >Company Description:</label
            >
            <textarea
              id="companyDescription"
              name="companyDescription"
              class="form-control"
              [(ngModel)]="editedOffer.companyDescription"
              required
            ></textarea>
          </div>

          <div class="mb-3">
            <label for="employeesNeeded" class="form-label"
              >Employees Needed:</label
            >
            <input
              type="number"
              id="employeesNeeded"
              name="employeesNeeded"
              class="form-control"
              [(ngModel)]="editedOffer.employeesNeeded"
              required
            />
          </div>

          <div class="mb-3">
            <label for="location" class="form-label">Location:</label>
            <input
              type="text"
              id="location"
              name="location"
              class="form-control"
              [(ngModel)]="editedOffer.location"
              required
            />
          </div>

          <div class="mb-3">
            <label for="description" class="form-label">Description:</label>
            <textarea
              id="description"
              name="description"
              class="form-control"
              [(ngModel)]="editedOffer.description"
              required
            ></textarea>
          </div>

          <div class="mb-3">
            <label for="skills" class="form-label">Skills:</label>
            <input
              type="text"
              id="skills"
              name="skills"
              class="form-control"
              [(ngModel)]="editedOffer.skills"
              required
            />
            <!-- Note: If skills is an array, you may need to handle it differently -->
          </div>

          <div class="mb-3">
            <label for="salary" class="form-label">Salary:</label>
            <input
              type="number"
              id="salary"
              name="salary"
              class="form-control"
              [(ngModel)]="editedOffer.salary"
              required
            />
          </div>

          <div class="mb-3">
            <label for="dateFin" class="form-label">Closing Date:</label>
            <input
              type="date"
              id="dateFin"
              name="dateFin"
              class="form-control"
              [(ngModel)]="editedOffer.dateFin"
              required
            />
          </div>

          <div class="modal-footer">
            <div>
              <button class="btn btn-success" type="submit">
                Update Offer
              </button>
            </div>
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Close
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
